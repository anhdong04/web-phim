<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DOWNCINE - Kho phim chất lượng cao</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#f5c518;
      --bg-dark:#0f0f0f;
      --bg-card:#1a1a1a;
      --text-white:#ffffff;
      --text-gray:#b3b3b3;
      --vlc-orange:#ff5722;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg-dark,#0f0f0f);color:var(--text-white,#fff);font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Arial;}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1200px;margin:0 auto;padding:24px}

    /* top nav */
    .nav{position:sticky;top:0;z-index:50;background:rgba(15,15,15,.75);backdrop-filter: blur(10px);border-bottom:1px solid rgba(255,255,255,.06)}
    .nav .wrap{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px 24px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900;letter-spacing:.6px}
    .brand i{color:var(--primary)}
    .navlinks{display:flex;gap:14px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
    .navlinks a{color:var(--text-gray);font-weight:700;font-size:13px;padding:8px 10px;border-radius:999px}
    .navlinks a:hover{background:rgba(255,255,255,.06);color:#fff}
    .btn{display:inline-flex;align-items:center;gap:10px;border:none;border-radius:12px;padding:12px 16px;font-weight:900;cursor:pointer}
    .btn-primary{background:var(--primary);color:#000}
    .btn-ghost{background:rgba(255,255,255,.06);color:#fff;border:1px solid rgba(255,255,255,.10)}
    .btn-ghost:hover{background:rgba(255,255,255,.10)}

    /* hero */
    .hero{position:relative;overflow:hidden;border-bottom:1px solid rgba(255,255,255,.06)}
    .hero .wrap{display:grid;grid-template-columns:1.2fr .8fr;gap:22px;align-items:center;padding:42px 24px 28px}
    @media(max-width:980px){.hero .wrap{grid-template-columns:1fr;}}
    .kicker{display:flex;gap:10px;align-items:center;color:var(--text-gray);font-weight:800}
    .kicker .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10)}
    h1{margin:12px 0 10px;font-size:46px;line-height:1.05;font-weight:900}
    @media(max-width:520px){h1{font-size:34px}}
    .lead{color:var(--text-gray);line-height:1.6;font-size:15px;max-width:62ch}
    .hero-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}

    .hero-card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.10);border-radius:18px;padding:16px}
    .mini-player{border-radius:14px;border:1px solid rgba(255,255,255,.10);overflow:hidden;background:#0b0b0b}
    .mini-top{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:rgba(255,255,255,.04)}
    .mini-top .dots{display:flex;gap:6px}
    .dot{width:8px;height:8px;border-radius:999px;background:rgba(255,255,255,.18)}
    .mini-body{padding:12px}
    .mini-row{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.06)}
    .mini-row:last-child{border-bottom:none}
    .tag{font-size:12px;color:var(--text-gray)}
    .bar{height:10px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden;flex:1;margin-left:10px}
    .bar > i{display:block;height:100%;width:65%;background:linear-gradient(90deg, var(--primary), #ff8a00)}

    /* sections */
    .section{padding:26px 0}
    .section h2{margin:0 0 10px;font-size:24px;font-weight:900}
    .section p{margin:0;color:var(--text-gray);line-height:1.6}

    .features{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-top:16px}
    @media(max-width:1000px){.features{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:520px){.features{grid-template-columns:1fr}}
    .feat{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:16px;min-height:120px}
    .feat i{color:var(--primary);font-size:20px}
    .feat h3{margin:10px 0 6px;font-size:15px}
    .feat .small{color:var(--text-gray);font-size:13px;line-height:1.55}

    /* previews */
    .previews{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:16px}
    @media(max-width:980px){.previews{grid-template-columns:1fr}}
    .shot{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:14px}
    .shot .head{display:flex;gap:10px;align-items:center;margin-bottom:10px}
    .shot .head span{font-weight:900}
    .shot .mock{aspect-ratio:16/9;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:
      radial-gradient(1200px 600px at 20% 0%, rgba(245,197,24,.20), transparent 50%),
      radial-gradient(900px 600px at 80% 20%, rgba(255,87,34,.12), transparent 52%),
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      overflow:hidden;position:relative;
    }
    .mock .badge{position:absolute;left:14px;top:14px;background:rgba(0,0,0,.55);border:1px solid rgba(255,255,255,.12);padding:7px 10px;border-radius:999px;font-weight:900}
    .mock .line{position:absolute;left:14px;right:14px;bottom:14px;height:44px;border-radius:14px;background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.10)}
    .mock .line:before{content:"";position:absolute;left:14px;top:14px;width:42%;height:14px;border-radius:999px;background:rgba(255,255,255,.10)}
    .mock .line:after{content:"";position:absolute;left:14px;top:30px;width:68%;height:10px;border-radius:999px;background:rgba(255,255,255,.08)}

    /* faq */
    .faq{margin-top:14px;display:grid;gap:10px}
    .qa{border:1px solid rgba(255,255,255,.10);border-radius:16px;background:rgba(255,255,255,.03);overflow:hidden}
    .q{width:100%;display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px 16px;background:transparent;color:#fff;border:none;font-weight:900;cursor:pointer;text-align:left}
    .q i{color:var(--primary)}
    .a{display:none;padding:0 16px 14px;color:var(--text-gray);line-height:1.6;font-size:14px}
    .qa.open .a{display:block}
    .qa.open .chev{transform:rotate(180deg)}
    .chev{transition:.15s}

    /* footer */
    .footer{padding:18px 0 34px;border-top:1px solid rgba(255,255,255,.06);color:var(--text-gray);font-size:13px}
    .footer .row{display:flex;gap:12px;flex-wrap:wrap;justify-content:space-between;align-items:center}
    .footer .links{display:flex;gap:10px;flex-wrap:wrap}
    .footer .links a{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08)}
    .footer .links a:hover{background:rgba(255,255,255,.08)}
  
    .mock.has-bg{
      background-size: cover !important;
      background-position: center !important;
    }
    .mock.has-bg::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.70));
    }
    .mock.has-bg > *{ position: relative; z-index: 1; }

  
    /* --- Banner hero like app.html --- */

    /* PATCH v4: robust banner background layer */
    .hero-banner::before{ content:none !important; }
    .banner-bg{
      z-index: 0;
      position:absolute; inset:0;
      background-image: none;
      background-size: cover;
      background-position: center;
      transform: scale(1.03);
      opacity: 1;
      filter: saturate(1.05);
    }

    .hero-banner{
      position: relative;
      overflow: hidden;
      border-bottom: 1px solid rgba(255,255,255,.06);
      background: #0b0b0b;
    }
    .hero-banner::before{
      content:"";
      position:absolute; inset:0;
      background-image: var(--banner-bg, none);
      background-size: cover;
      background-position: center;
      filter: saturate(1.05);
      transform: scale(1.03);
      opacity: .92;
    }
    .hero-banner::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(1000px 520px at 20% 30%, rgba(0,0,0,.05), rgba(0,0,0,.55) 60%),
        linear-gradient(90deg, rgba(0,0,0,.70) 0%, rgba(0,0,0,.40) 45%, rgba(0,0,0,.10) 75%, rgba(0,0,0,.00) 100%),
        linear-gradient(180deg, rgba(0,0,0,.10) 0%, rgba(0,0,0,.45) 70%, rgba(0,0,0,.75) 100%);
    }
    .hero-banner .wrap{
      z-index: 2;
      position: relative;
      z-index: 1;
      padding: 44px 24px 34px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 22px;
      align-items: end;
    }
    @media(max-width:980px){
      .hero-banner .wrap{grid-template-columns:1fr; padding: 34px 18px 26px;}
    }
    .banner-title{
      margin: 0;
      font-size: 52px;
      line-height: 1.03;
      font-weight: 900;
      letter-spacing: .2px;
      text-transform: uppercase;
    }
    @media(max-width:520px){
      .banner-title{font-size: 36px;}
    }
    .banner-pills{
      display:flex; gap:10px; flex-wrap:wrap;
      margin: 14px 0 10px;
      align-items:center;
    }
    .b-pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.14);
      font-weight: 900;
      font-size: 13px;
      color: #fff;
      backdrop-filter: blur(6px);
    }
    .b-pill.primary{ border-color: rgba(245,197,24,.35); color: var(--primary); }
    .banner-overview{
      color: rgba(255,255,255,.80);
      line-height: 1.55;
      max-width: 70ch;
      margin: 0 0 16px;
      font-size: 14px;
      text-shadow: 0 8px 28px rgba(0,0,0,.45);
    }
    .banner-actions{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .circle-play{
      width: 58px; height: 58px;
      border-radius: 50%;
      border: 2px solid rgba(245,197,24,.55);
      background: rgba(0,0,0,.30);
      display:inline-flex; align-items:center; justify-content:center;
      cursor:pointer;
      transition: .15s;
    }
    .circle-play:hover{ transform: scale(1.03); background: rgba(0,0,0,.42); }
    .circle-play i{ color: var(--primary); font-size: 20px; margin-left: 2px; }
    .banner-cta{
      display:inline-flex; align-items:center; gap:10px;
      padding: 12px 16px;
      border-radius: 12px;
      background: var(--primary);
      color:#000;
      font-weight: 900;
      border:none;
      cursor:pointer;
    }
    .banner-cta.secondary{
      background: rgba(255,255,255,.10);
      color:#fff;
      border: 1px solid rgba(255,255,255,.14);
    }
    .banner-right{
      display:flex;
      justify-content:flex-end;
      align-items:flex-end;
    }
    .thumbstrip{
      width:min(520px, 100%);
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      padding: 10px;
      display:flex;
      gap:8px;
      overflow:auto;
      backdrop-filter: blur(6px);
    }
    .thumbstrip::-webkit-scrollbar{height:8px}
    .thumbstrip::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:999px}
    .thumb{
      flex: 0 0 auto;
      width: 62px; height: 92px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.14);
      overflow:hidden;
      background:#111;
      cursor:pointer;
      position:relative;
    }
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .thumb.active{ outline: 2px solid rgba(245,197,24,.85); outline-offset: 2px; }

  </style>
</head>

<body>
  <div class="nav">
    <div class="wrap">
      <div class="brand">
        <i class="fa-solid fa-circle-play"></i>
        <span>DOWNCINE</span>
      </div>
      <div class="navlinks">
        <a href="#tinh-nang">Tính năng</a>
        <a href="#giao-dien">Giao diện</a>
        <a href="#faq">FAQ</a>
        <a class="btn btn-ghost" href="https://t.me/" target="_blank" rel="noopener">
          <i class="fa-brands fa-telegram"></i> Cộng đồng
        </a>
      </div>
    </div>
  </div>

  
  <!-- Banner (random hot from movies.js / series.js) -->
  <section class="hero-banner" id="banner">
    <div class="banner-bg" id="bannerBg" aria-hidden="true"></div>
    <div class="wrap">
      <div>
        <div class="kicker" style="margin-bottom:10px">
          <span class="pill"><i class="fa-solid fa-fire"></i> Phim hot ngẫu nhiên</span>
          <span class="pill"><i class="fa-solid fa-wand-magic-sparkles"></i> DOWNCINE</span>
        </div>

        <h1 class="banner-title" id="bannerTitle">LOADING...</h1>

        <div class="banner-pills" id="bannerPills">
          <span class="b-pill primary"><i class="fa-solid fa-star"></i> IMDb</span>
          <span class="b-pill"><i class="fa-solid fa-calendar"></i> ...</span>
          <span class="b-pill"><i class="fa-solid fa-tv"></i> ...</span>
        </div>

        <p class="banner-overview" id="bannerOverview">
          Đang lấy banner từ thư viện của bạn...
        </p>

        <div class="banner-actions">
          <button class="circle-play" type="button" onclick="goToAppFromBanner()" title="Vào web xem phim">
            <i class="fa-solid fa-play"></i>
          </button>
          <a class="banner-cta" href="app.html"><i class="fa-solid fa-circle-play"></i> Vào web xem phim</a>
          <a class="banner-cta secondary" href="#tinh-nang"><i class="fa-solid fa-circle-info"></i> Tính năng</a>
        </div>
      </div>

      <div class="banner-right">
        <div class="thumbstrip" id="thumbStrip" aria-label="Hot picks">
          <!-- thumbs injected by JS -->
        </div>
      </div>
    </div>
  </section>


<section class="hero">
    <div class="wrap">
      <div>
        <div class="kicker">
          <span class="pill"><i class="fa-solid fa-bolt"></i> Server siêu tốc</span>
          <span class="pill"><i class="fa-solid fa-tv"></i> 4K UHD</span>
          <span class="pill"><i class="fa-solid fa-ban"></i> Không quảng cáo</span>
        </div>

        <h1>Xem phim mượt – chất như rạp</h1>
        <p class="lead">
          DOWNCINE tập trung vào trải nghiệm: kho phim chất lượng cao, không quảng cáo, tìm phim nhanh, xem liền tay.
          Hỗ trợ cả <b>phim lẻ</b> và <b>phim bộ</b> (chọn tập theo Season/Episode).
        </p>

        <div class="hero-actions">
          <a class="btn btn-primary" href="app.html">
            <i class="fa-solid fa-play"></i> Vào web xem phim
          </a>
          <a class="btn btn-ghost" href="#tinh-nang">
            <i class="fa-solid fa-circle-info"></i> Tìm hiểu thêm
          </a>
        </div>

        
      </div>

      <div class="hero-card">
        <div class="mini-player">
          <div class="mini-top">
            <div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
            <span class="tag"><i class="fa-solid fa-signal"></i> Đang xem</span>
          </div>
          <div class="mini-body">
            <div class="mini-row">
              <span class="tag">HEVC</span>
              <div class="bar"><i></i></div>
              <span class="tag">60fps</span>
            </div>
            <div class="mini-row">
              <span class="tag">Subtitle VI</span>
              <div class="bar"><i style="width:78%"></i></div>
              <span class="tag">4K</span>
            </div>
            <div class="mini-row">
              <span class="tag">Ổn định</span>
              <div class="bar"><i style="width:72%"></i></div>
              <span class="tag">Nhanh</span>
            </div>
          </div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
          <span class="pill"><i class="fa-solid fa-shield"></i> Không quảng cáo</span>
          <span class="pill"><i class="fa-solid fa-wand-magic-sparkles"></i> UI đẹp</span>
          <span class="pill"><i class="fa-solid fa-magnifying-glass"></i> Tìm nhanh</span>
        </div>
      </div>
    </div>
  </section>

  <section class="section" id="tinh-nang">
    <div class="wrap">
      <h2>Vì sao chọn DOWNCINE?</h2>
      <p>Những điểm cộng giúp trải nghiệm xem phim của bạn “đã” hơn mỗi ngày.</p>

      <div class="features">
        <div class="feat">
          <i class="fa-solid fa-globe"></i>
          <h3>Server siêu tốc</h3>
          <div class="small">Tối ưu link direct, mở VLC hoặc tải nhanh — bấm là chạy.</div>
        </div>
        <div class="feat">
          <i class="fa-solid fa-video"></i>
          <h3>Chất lượng cao</h3>
          <div class="small">Ưu tiên bản đẹp (HEVC/WEB-DL), hiển thị rõ thông tin phim.</div>
        </div>
        <div class="feat">
          <i class="fa-solid fa-rectangle-list"></i>
          <h3>Phim bộ có chọn tập</h3>
          <div class="small">Season/Episode rõ ràng, đổi link theo tập ngay trong pop-up.</div>
        </div>
        <div class="feat">
          <i class="fa-solid fa-wand-magic-sparkles"></i>
          <h3>Giao diện thân thiện</h3>
          <div class="small">Tìm kiếm, lọc năm/tháng, “Xem ngay/Chi tiết” mượt mà.</div>
        </div>
      </div>
    </div>
  </section>

  <section class="section" id="giao-dien">
    <div class="wrap">
      <h2>Ngầu từ màn hình đầu</h2>
      <p>Preview cảm giác giao diện trước khi vào web xem phim.</p>

      <div class="previews">
        <div class="shot">
          <div class="head"><i class="fa-solid fa-house"></i><span>Trang chủ • Mới cập nhật</span></div>
          <div class="mock" id="mockHome">
            <div class="badge" id="badgeHome">DOWNCINE • Home</div>
            <div class="line"></div>
          </div>
        </div>
        <div class="shot">
          <div class="head"><i class="fa-solid fa-circle-play"></i><span>Chi tiết • VLC • Trailer</span></div>
          <div class="mock" id="mockModal">
            <div class="badge" id="badgeModal">Modal • Xem ngay</div>
            <div class="line"></div>
          </div>
        </div>
      </div>

      <div class="hero-actions" style="margin-top:18px">
        <a class="btn btn-primary" href="app.html">
          <i class="fa-solid fa-play"></i> Vào web xem phim
        </a>
        <a class="btn btn-ghost" href="#faq">
          <i class="fa-solid fa-circle-question"></i> Xem FAQ
        </a>
      </div>
    </div>
  </section>

  <section class="section" id="faq">
    <div class="wrap">
      <h2>FAQ</h2>
      <p>Một vài câu hỏi thường gặp khi dùng DOWNCINE.</p>

      <div class="faq">
        <div class="qa">
          <button class="q" type="button" onclick="toggleQA(this)">
            DOWNCINE có miễn phí không ?
            <i class="fa-solid fa-chevron-down chev"></i>
          </button>
          <div class="a">Bạn có thể dùng miễn phí với đầy đủ tính năng xem phim, không quảng cáo.</div>
        </div>

        <div class="qa">
          <button class="q" type="button" onclick="toggleQA(this)">
            Mở phim trên điện thoại như thế nào ?
            <i class="fa-solid fa-chevron-down chev"></i>
          </button>
          <div class="a">Trong pop-up phim, bấm nút mở VLC (mobile) hoặc copy link stream để dán vào app player bạn dùng.</div>
        </div>

        <div class="qa">
          <button class="q" type="button" onclick="toggleQA(this)">
            Phim bộ chọn tập ở đâu ?
            <i class="fa-solid fa-chevron-down chev"></i>
          </button>
          <div class="a">Vào web xem phim → mở phim bộ → chọn Season/Episode trong modal. Link sẽ tự đổi theo tập.</div>
        </div>

        <div class="qa">
          <button class="q" type="button" onclick="toggleQA(this)">
            Thiết bị nào hỗ trợ ?
            <i class="fa-solid fa-chevron-down chev"></i>
          </button>
          <div class="a">Android, iOS, Windows, macOS – tối ưu UI/UX cho từng nền tảng.</div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="wrap">
      <div class="row">
        <div style="display:flex;align-items:center;gap:10px">
          <i class="fa-solid fa-circle-play" style="color:var(--primary)"></i>
          <b>DOWNCINE</b>
          <span>© 2025</span>
        </div>
        <div class="links">
          <a href="app.html"><i class="fa-solid fa-play"></i> Vào xem phim</a>
          <a href="#tinh-nang"><i class="fa-solid fa-sparkles"></i> Tính năng</a>
          <a href="#faq"><i class="fa-solid fa-circle-question"></i> FAQ</a>
        </div>
      </div>
    </div>
  </footer>

  
  <!-- Optional: load your library to show random hot banners -->
  <script src="movies.js"></script>
  <script src="series.js"></script>

<script>
    function toggleQA(btn){
      const qa = btn.closest('.qa');
      if(!qa) return;
      const open = qa.classList.contains('open');
      document.querySelectorAll('.qa').forEach(x=>x.classList.remove('open'));
      if(!open) qa.classList.add('open');
    }

    // Smooth scroll for internal anchors
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href');
        const el = document.querySelector(id);
        if(!el) return;
        e.preventDefault();
        el.scrollIntoView({behavior:'smooth', block:'start'});
      });
    });
  
    // --- Random hot banners from your library (movies.js / series.js) ---
    function _arr(x){ return Array.isArray(x) ? x : []; }

    function _getSeriesArray(){
      if(typeof seriesList !== "undefined") return _arr(seriesList);
      if(typeof series !== "undefined" && series && typeof series === "object") return [series];
      return [];
    }

    function _getMoviesArray(){
      if(typeof movieList !== "undefined") return _arr(movieList);
      return [];
    }

    function _pickImage(item){
      const img = item.backdrop_path || item.poster_path || "";
      return String(img || "").trim();
    }

    function _pickTitle(item){
      return item.title || item.name || item.original_title || item.original_name || "HOT";
    }

    function _shuffle(a){
      const arr = a.slice();
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function applyRandomBanners(){
      const all = [
        ..._getMoviesArray(),
        ..._getSeriesArray()
      ];

      // fallback if user hasn't placed movies.js/series.js
      if(!all.length) return;

      // Prefer items that have backdrop/poster url
      const withImg = all.filter(x => _pickImage(x));
      const pool = withImg.length ? withImg : all;

      // pick for small preview mocks
      const picks = _shuffle(pool).slice(0,2);
      const [p1, p2] = picks;

      const mockHome = document.getElementById("mockHome");
      const mockModal = document.getElementById("mockModal");
      const badgeHome = document.getElementById("badgeHome");
      const badgeModal = document.getElementById("badgeModal");

      if(p1 && mockHome && badgeHome){
        const img1 = _pickImage(p1);
        if(img1){
          mockHome.classList.add("has-bg");
          mockHome.style.backgroundImage = `url('${img1}')`;
        }
        badgeHome.textContent = "HOT • " + _pickTitle(p1);
      }
      if(p2 && mockModal && badgeModal){
        const img2 = _pickImage(p2);
        if(img2){
          mockModal.classList.add("has-bg");
          mockModal.style.backgroundImage = `url('${img2}')`;
        }
        badgeModal.textContent = "HOT • " + _pickTitle(p2);
      }

      // Banner hero: show 8 thumbs + choose 1 as active banner
      const bannerTitle = document.getElementById("bannerTitle");
      const bannerOverview = document.getElementById("bannerOverview");
      const bannerPills = document.getElementById("bannerPills");
      const thumbStrip = document.getElementById("thumbStrip");
      const bannerEl = document.getElementById("banner");

      const thumbPool = _shuffle(pool).slice(0, 10);
      let active = thumbPool[0] || p1 || pool[0];

      function yearOf(item){
        const d = item.release_date || item.first_air_date || "";
        return String(d||"").split("-")[0] || "";
      }

      function scoreOf(item){
        const v = item.vote_average;
        if(v===0 || v===null || v===undefined) return "";
        return Number(v).toFixed(1);
      }

      function typeOf(item){
        // if item has episodes => series; else movie (best-effort)
        if(item.episodes || item.number_of_seasons || item.name) return "PHIM BỘ";
        return "PHIM LẺ";
      }

      function setBanner(item){
        if(!item || !bannerEl) return;
        const img = _pickImage(item);
        const bannerBg = document.getElementById("bannerBg");
        if(img && bannerBg) bannerBg.style.backgroundImage = `url('${img}')`;
        // keep a css-var fallback (not required)
        if(img) bannerEl.style.setProperty("--banner-bg", `url('${img}')`);

        if(bannerTitle) bannerTitle.textContent = (_pickTitle(item) || "HOT").toUpperCase();

        const ov = String(item.overview || "").trim();
        if(bannerOverview) bannerOverview.textContent = ov ? ov : "Chưa có mô tả cho phim này.";

        const y = yearOf(item);
        const sc = scoreOf(item);
        const tp = typeOf(item);

        if(bannerPills){
          bannerPills.innerHTML = `
            ${sc ? `<span class="b-pill primary"><i class="fa-solid fa-star"></i> IMDb ${sc}</span>` : `<span class="b-pill primary"><i class="fa-solid fa-star"></i> IMDb</span>`}
            ${y ? `<span class="b-pill"><i class="fa-solid fa-calendar"></i> ${y}</span>` : ""}
            <span class="b-pill"><i class="fa-solid fa-tv"></i> ${tp}</span>
          `;
        }

        // activate thumb highlight
        if(thumbStrip){
          thumbStrip.querySelectorAll(".thumb").forEach(t=>t.classList.remove("active"));
          const hit = thumbStrip.querySelector(`.thumb[data-k='${encodeURIComponent(_pickTitle(item))}']`);
          if(hit) hit.classList.add("active");
        }

        // store banner item so play button can lead to app (or later deep-link)
        window.__DOWNCINE_BANNER_ITEM__ = item;
      }

      if(thumbStrip){
        thumbStrip.innerHTML = "";
        thumbPool.forEach((it, idx)=>{
          const d = document.createElement("div");
          d.className = "thumb" + (idx===0 ? " active" : "");
          d.dataset.k = encodeURIComponent(_pickTitle(it));
          const img = _pickImage(it);
          d.innerHTML = `<img alt="thumb" src="${img}">`;
          d.addEventListener("click", ()=> setBanner(it));
          thumbStrip.appendChild(d);
        });
      }

      setBanner(active);
    }

    function goToAppFromBanner(){
      // for now: just go to app.html
      window.location.href = "app.html";
    }

    // run when DOM ready (and after scripts loaded) (and after scripts loaded)
    window.addEventListener("load", applyRandomBanners);

  </script>
</body>
</html>
